<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stack Overflow Data Analysis</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/wordcloud2.js/1.2.2/wordcloud2.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Stack Overflow Java Data Analysis</h1>
            <p>CS209A Final Project</p>
        </header>

        <section id="controls">
            <div class="card">
                <h2>Data Collection</h2>
                <p>Status: <span id="collectionStatus">Ready</span></p>
                <button id="collectBtn" onclick="triggerCollection()">Start Data Collection</button>
            </div>
        </section>

        <nav>
            <button class="tab-btn active" onclick="showTab('trends')">Topic Trends</button>
            <button class="tab-btn" onclick="showTab('cooccurrence')">Co-occurrence</button>
            <button class="tab-btn" onclick="showTab('pitfalls')">Multithreading Pitfalls</button>
            <button class="tab-btn" onclick="showTab('solvability')">Solvability</button>
        </nav>

        <main>
            <section id="trends" class="tab-content active">
                <h2>Topic Trends Over Time</h2>
                <div class="chart-container">
                    <canvas id="trendsChart"></canvas>
                </div>
                <div class="controls">
                    <label>Tag: <input type="text" id="trendTag" value="java"></label>
                    <label>Start: <input type="month" id="trendStart" value="2008-01"></label>
                    <label>End: <input type="month" id="trendEnd" value="2025-12"></label>
                    <button onclick="loadTrends()">Update Chart</button>
                </div>
            </section>
            <section id="cooccurrence" class="tab-content">
                <h2>Topic Co-occurrence</h2>
                <div class="chart-container">
                    <canvas id="cooccurrenceChart"></canvas>
                </div>
                <div class="controls">
                    <label>Top N: <input type="number" id="coocN" value="10"></label>
                    <button onclick="loadCooccurrence()">Update Chart</button>
                </div>
            </section>
            <section id="pitfalls" class="tab-content">
                <h2>Common Pitfalls in Multithreading (Word Cloud)</h2>
                <div class="chart-container">
                    <canvas id="pitfallsCanvas" width="800" height="500"></canvas>
                </div>
                <button onclick="loadPitfalls()">Refresh Analysis</button>
            </section>
            <!-- 可解决性分析部分 -->
            <section id="solvability" class="tab-content">
                <h2>Solvable vs. Hard-to-Solve Questions</h2>
                <div id="solvabilityChartsContainer" class="charts-grid">
                    <!-- 饼状图将注入到这里 -->
                </div>
                <div class="controls">
                    <button onclick="loadSolvability()">Analyze</button>
                </div>
            </section>
        </main>
    </div>

    <script src="script.js"></script>
</body>
</html>
